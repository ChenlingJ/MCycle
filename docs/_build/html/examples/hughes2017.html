
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Basic organic Rankine cycle with a corrugated-plate evaporator &#8212; MCycle 1.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MCycle Defaults" href="../defaults.html" />
    <link rel="prev" title="Quick start example of basic MCycle features" href="quickstart.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../defaults.html" title="MCycle Defaults"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quick start example of basic MCycle features"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MCycle 1.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="contents.html" accesskey="U">Examples</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="basic-organic-rankine-cycle-with-a-corrugated-plate-evaporator">
<h1><a class="toc-backref" href="#id3">Basic organic Rankine cycle with a corrugated-plate evaporator</a><a class="headerlink" href="#basic-organic-rankine-cycle-with-a-corrugated-plate-evaporator" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#basic-organic-rankine-cycle-with-a-corrugated-plate-evaporator" id="id3">Basic organic Rankine cycle with a corrugated-plate evaporator</a><ul>
<li><a class="reference internal" href="#setting-up-the-default-characteristics-of-the-cycle" id="id4">Setting up the default characteristics of the cycle</a><ul>
<li><a class="reference internal" href="#working-fluid" id="id5">Working fluid</a></li>
<li><a class="reference internal" href="#heat-source" id="id6">Heat source</a></li>
<li><a class="reference internal" href="#ambient-air-heat-sink" id="id7">Ambient air/ heat sink</a></li>
<li><a class="reference internal" href="#evaporator-and-condenser" id="id8">Evaporator and condenser</a></li>
<li><a class="reference internal" href="#compressor-and-expander" id="id9">Compressor and expander</a></li>
<li><a class="reference internal" href="#design-parameters" id="id10">Design parameters</a></li>
<li><a class="reference internal" href="#design-conditions-temperature-entropy-plot" id="id11">Design conditions temperature-entropy plot</a></li>
</ul>
</li>
<li><a class="reference internal" href="#superheating-analysis" id="id12">Superheating analysis</a></li>
<li><a class="reference internal" href="#pinch-point-temperature-difference-analysis" id="id13">Pinch-point temperature difference analysis</a></li>
<li><a class="reference internal" href="#evaporating-pressure-analysis" id="id14">Evaporating pressure analysis</a></li>
<li><a class="reference internal" href="#exhaust-gas-mass-flow-rate-analysis" id="id15">Exhaust gas mass flow rate analysis</a></li>
<li><a class="reference internal" href="#differences-from-hughes-and-olsen-2017-paper" id="id16">Differences from Hughes and Olsen (2017) paper</a></li>
<li><a class="reference internal" href="#references" id="id17">References</a></li>
<li><a class="reference internal" href="#source-code" id="id18">Source code</a></li>
</ul>
</li>
</ul>
</div>
<p>This example is found in examples/hughes2017 and is an update to the analysis found in the paper <em>On the potential of organic Rankine cycles for recovering waste heat from the exhaust gases of a piston aero-engine</em> by Hughes and Olsen, presented at Asia-Pacific Symposium on Aerospace Technology 2017, Seoul, Korea (<a class="reference external" href="https://www.unsworks.unsw.edu.au/primo-explore/fulldisplay?docid=unsworks_modsunsworks_47631&amp;context=L&amp;vid=UNSWORKS&amp;search_scope=unsworks_search_scope&amp;tab=default_tab&amp;lang=en_US">hyperlink</a>) <a class="reference internal" href="#hughes2017" id="id1">[Hughes2017]</a>.</p>
<p>The first section of the script imports the required modules and sets up the default formatting for the plots and some custom formatting for matplotlib.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mcycle</span> <span class="k">as</span> <span class="nn">mc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">CoolProp</span> <span class="k">as</span> <span class="nn">CP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span> <span class="o">=</span> <span class="s1">&#39;plots&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span> <span class="o">=</span> <span class="s2">&quot;png&quot;</span>  <span class="c1"># change to &quot;jpg&quot; if preferred</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span> <span class="o">=</span> <span class="mi">600</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mc</span><span class="o">.</span><span class="n">updateDefaults</span><span class="p">()</span><span class="n">plots_folder</span> <span class="o">=</span> <span class="s2">&quot;plots&quot;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">colours</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linestyles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="s2">&quot;-.&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">markerstyles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="setting-up-the-default-characteristics-of-the-cycle">
<h2><a class="toc-backref" href="#id4">Setting up the default characteristics of the cycle</a><a class="headerlink" href="#setting-up-the-default-characteristics-of-the-cycle" title="Permalink to this headline">¶</a></h2>
<div class="section" id="working-fluid">
<h3><a class="toc-backref" href="#id5">Working fluid</a><a class="headerlink" href="#working-fluid" title="Permalink to this headline">¶</a></h3>
<p>Refrigerant R123 (using CoolProp’s HEOS backend by default).:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wf</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">FlowState</span><span class="p">(</span><span class="s2">&quot;R123&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="heat-source">
<h3><a class="toc-backref" href="#id6">Heat source</a><a class="headerlink" href="#heat-source" title="Permalink to this headline">¶</a></h3>
<p>The exhaust flow from the engine is approximated using the following characteristics.</p>
<ul class="simple">
<li><span class="math">\(N_2\)</span> (75%), <span class="math">\(C0_2\)</span> (25%) (by molar fraction)</li>
<li><span class="math">\(p_{static} = 1.116\)</span> bar</li>
<li><span class="math">\(T_{static} = 1170\)</span> K</li>
<li><span class="math">\(\dot{m} = 0.09\)</span> Kg/s</li>
</ul>
<p>As CoolProp can have difficulties with mixtures, we instead use FlowStatePoly for the exhaust gasses; fitting a 2nd degree polynomial to the properties of the exhaust mixture evaluated at 300, 500, 700, 900 and 1170 K:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">TData</span> <span class="o">=</span> <span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="mf">1170.</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sourceRefData</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">RefData</span><span class="p">(</span><span class="n">sourceFluid</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sourceIn_p</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="n">TData</span><span class="p">},</span> <span class="n">phaseCP</span><span class="o">=</span><span class="n">CP</span><span class="o">.</span><span class="n">iphase_gas</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sourceIn</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">FlowStatePoly</span><span class="p">(</span><span class="n">sourceRefData</span><span class="p">,</span> <span class="mf">0.09</span><span class="p">,</span> <span class="n">CP</span><span class="o">.</span><span class="n">PT_INPUTS</span><span class="p">,</span> <span class="n">sourceIn_p</span><span class="p">,</span> <span class="n">sourceIn_T</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="ambient-air-heat-sink">
<h3><a class="toc-backref" href="#id7">Ambient air/ heat sink</a><a class="headerlink" href="#ambient-air-heat-sink" title="Permalink to this headline">¶</a></h3>
<p>Assuming the engine is travelling at 100knots at an altitude of 3000ft, the ambient air is approximated using the following characteristics.</p>
<ul class="simple">
<li>Air (100%)</li>
<li><span class="math">\(p_{static} = 0.8826\)</span> bar</li>
<li><span class="math">\(T_{static} = 281.65\)</span> K</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sinkIn</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">FlowState</span><span class="p">(</span><span class="s2">&quot;Air&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">CP</span><span class="o">.</span><span class="n">PT_INPUTS</span><span class="p">,</span> <span class="mf">0.88260e5</span><span class="p">,</span> <span class="mf">281.65</span><span class="p">)</span>
</pre></div>
</div>
<p>The dead state/ ambient properties of the source and sink are at this same pressure and temperature.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sinkAmbient</span> <span class="o">=</span> <span class="n">sinkIn</span><span class="o">.</span><span class="n">_copy</span><span class="p">({})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sourceAmbient</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">FlowState</span><span class="p">(</span><span class="n">sourceFluid</span><span class="p">,</span> <span class="n">CP</span><span class="o">.</span><span class="n">iphase_gas</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">CP</span><span class="o">.</span><span class="n">PT_INPUTS</span><span class="p">,</span> <span class="mf">0.88260e5</span><span class="p">,</span> <span class="mf">281.65</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="evaporator-and-condenser">
<h3><a class="toc-backref" href="#id8">Evaporator and condenser</a><a class="headerlink" href="#evaporator-and-condenser" title="Permalink to this headline">¶</a></h3>
<p>For the evaporator, we used a AlfaLaval AC30EQ model corrugated plate heat exchanger.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">evap</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_AC30EQ</span><span class="p">(</span><span class="n">sizeAttr</span><span class="o">=</span><span class="s2">&quot;NPlate&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>As sizing the condenser is not central to this analysis, it is treated simply as a heat sink.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cond</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">ClrBasicConstP</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sizeAttr</span><span class="o">=</span><span class="s2">&quot;Q&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="compressor-and-expander">
<h3><a class="toc-backref" href="#id9">Compressor and expander</a><a class="headerlink" href="#compressor-and-expander" title="Permalink to this headline">¶</a></h3>
<p>Equally, sizing of the compressor and expander is beyond the scope of this analysis. Here, it is simply assumed that they both have an isentropic efficiency of 70%.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">CompBasic</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">sizeAttr</span><span class="o">=</span><span class="s2">&quot;pRatio&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">ExpBasic</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">sizeAttr</span><span class="o">=</span><span class="s2">&quot;pRatio&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="design-parameters">
<h3><a class="toc-backref" href="#id10">Design parameters</a><a class="headerlink" href="#design-parameters" title="Permalink to this headline">¶</a></h3>
<p>As default design parameters, we use:</p>
<ul class="simple">
<li><span class="math">\(p_{evap} = 10\)</span> bar</li>
<li><span class="math">\(T_{cond} = 300\)</span> K</li>
<li>No superheating</li>
<li>No subcooling</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pEvap</span> <span class="o">=</span> <span class="mf">10e5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">TCond</span> <span class="o">=</span> <span class="mi">300</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">superheat</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subcool</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>For this analysis, we calculate the pressure drops in he evaporator but will not update the flows to reflect these. Additionally, we only consider frictional pressure drops: acceleration, port and head pressure drops are relatively small and hence we neglect them. We will also set the heat transfer methods that we will useThe cycle configuration parameters are hence created::</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">Config</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
<span class="go">        &#39;dpEvap&#39;: False,</span>
<span class="go">        &#39;dpCond&#39;: False,</span>
<span class="go">        &#39;dpF&#39;: True,</span>
<span class="go">        &#39;dpAcc&#39;: False,</span>
<span class="go">        &#39;dpPort&#39;: False,</span>
<span class="go">        &#39;dpHead&#39;: False})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">set_method</span><span class="p">(</span><span class="s2">&quot;chisholmWannairachchi_sp&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;GeomHxPlateCorrChevron&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;all-sp&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;wf&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">set_method</span><span class="p">(</span><span class="s2">&quot;yanLin_tpEvap&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;GeomHxPlateCorrChevron&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;tpEvap&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;wf&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">set_method</span><span class="p">(</span><span class="s2">&quot;savostinTikhonov_sp&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;GeomHxPlateCorrChevron&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;all-sp&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;sf&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Finally, we can create the RankineBasic object, parsing each of the above components.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cycle</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">RankineBasic</span><span class="p">(</span><span class="n">wf</span><span class="p">,</span> <span class="n">evap</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">cond</span><span class="p">,</span> <span class="n">comp</span><span class="p">,</span> <span class="n">pEvap</span><span class="p">,</span> <span class="n">superheat</span><span class="p">,</span> <span class="n">nan</span><span class="p">,</span> <span class="n">subcool</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
<span class="go">        &#39;TCond&#39;: TCond,</span>
<span class="go">        &#39;sourceIn&#39;: sourceIn,</span>
<span class="go">        &#39;sourceAmbient&#39;: sourceAmbient})</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">update()</span></code> method is used for <code class="docutils literal"><span class="pre">TCond</span></code>, <code class="docutils literal"><span class="pre">sourceIn</span></code>, <code class="docutils literal"><span class="pre">sourceAmbient</span></code> as these are all properties of the <code class="docutils literal"><span class="pre">RankineBasic</span></code> class, thus parsing them as keyword arguments calls their setter which ensures all relelvant properties and component flows are updated.</p>
</div>
</div>
<div class="section" id="design-conditions-temperature-entropy-plot">
<h3><a class="toc-backref" href="#id11">Design conditions temperature-entropy plot</a><a class="headerlink" href="#design-conditions-temperature-entropy-plot" title="Permalink to this headline">¶</a></h3>
<p>For the purpose of producing a nicer plot of the cycle at design conditions, we temporarily change the condenser to a heat exchanger so that a sink flow line appears on the plot (<a class="reference internal" href="../components/coolers.html#mcycle.components.coolers.clr_basic.ClrBasic" title="mcycle.components.coolers.clr_basic.ClrBasic"><code class="xref py py-meth docutils literal"><span class="pre">ClrBasic</span></code></a> objects do not show up in plot as they do not have a defined temperature. We replace the condenser with a heat exchanger and set the sink flow mass flow rate high to approximate a constant temperature sink.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;cond&#39;</span><span class="p">:</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_CBXP27</span><span class="p">(),</span> <span class="s1">&#39;pptdEvap&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span> <span class="s1">&#39;sinkIn&#39;</span><span class="p">:</span> <span class="n">sinkIn</span><span class="p">,</span> <span class="s1">&#39;sinkIn.m&#39;</span><span class="p">:</span> <span class="mf">100.</span><span class="p">})</span>
</pre></div>
</div>
<p>Next, we must set up the cycle to the design conditions which we can do using <a class="reference internal" href="../cycles/rankinebasic.html#mcycle.cycles.rankinebasic.RankineBasic.size" title="mcycle.cycles.rankinebasic.RankineBasic.size"><code class="xref py py-meth docutils literal"><span class="pre">size()</span></code></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cycle</span><span class="o">.</span><span class="n">sizeSetup</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>After calling <a class="reference internal" href="../cycles/rankinebasic.html#mcycle.cycles.rankinebasic.RankineBasic.plot" title="mcycle.cycles.rankinebasic.RankineBasic.plot"><code class="xref py py-meth docutils literal"><span class="pre">plot()</span></code></a>, the following plot is produced.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/hughes2017_plot_RankineBasic.png"><img alt="Design conditions plot" src="../_images/hughes2017_plot_RankineBasic.png" style="height: 200px;" /></a>
</div>
</div>
</div>
<div class="section" id="superheating-analysis">
<h2><a class="toc-backref" href="#id12">Superheating analysis</a><a class="headerlink" href="#superheating-analysis" title="Permalink to this headline">¶</a></h2>
<p>To study the effects of superheating on the cycle efficiency, we vary the degree of superheating from 0 to 200 K for various evaporating pressures. Here we keep the condensing temperature constant at 300 K, as well as the pinch-point temperature difference in the evaporator constant at 20 K.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pptdEvap</span> <span class="o">=</span> <span class="mf">20.</span>  <span class="c1"># K</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p_vals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>  <span class="c1"># bar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">superheat_vals</span> <span class="o">=</span> <span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)</span>  <span class="c1"># K</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_eff</span><span class="p">,</span> <span class="n">plot_Pnet</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span> <span class="c1"># lists to store results</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
<span class="go">        plot_eff.append([])</span>
<span class="go">        plot_Pnet.append([])</span>
<span class="go">        cycle.update({&#39;pEvap&#39;: p_vals[i] * 10**5})</span>
<span class="go">        for superheat in superheat_vals[i]:</span>
<span class="go">            cycle.update({&#39;superheat&#39;: superheat, &#39;pptdEvap&#39;: pptdEvap})</span>
<span class="go">            cycle.sizeSetup(False, False)</span>
<span class="go">            plot_eff[i].append(cycle.effExergy())</span>
<span class="go">            plot_Pnet[i].append(cycle.PNet() / 1000)  # kW</span>
</pre></div>
</div>
<p>This produces the following plots.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/hughes2017_superheat_eff.png"><img alt="Effect of superheating on exergy efficiency." src="../_images/hughes2017_superheat_eff.png" style="height: 200px;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/hughes2017_superheat_Pnet.png"><img alt="Effect of superheating on net power output." src="../_images/hughes2017_superheat_Pnet.png" style="height: 200px;" /></a>
</div>
</div>
<div class="section" id="pinch-point-temperature-difference-analysis">
<h2><a class="toc-backref" href="#id13">Pinch-point temperature difference analysis</a><a class="headerlink" href="#pinch-point-temperature-difference-analysis" title="Permalink to this headline">¶</a></h2>
<p>Next, we study the effects of the evaporator pinch-point temperature difference on the exergy efficiency, required number of plates and pressure drop of the working fluid. Superheating is set to 0 K and evaporating pressure is varied from 5 to 25 bar.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cycle</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dpAccWf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dpHeadWf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dpPortWf</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cycle</span><span class="o">.</span><span class="n">superheat</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># K</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p_vals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>  <span class="c1"># bar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pptd_vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span> <span class="mi">40</span><span class="p">)]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)</span>  <span class="c1"># K</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_eff</span><span class="p">,</span> <span class="n">plot_NPlate</span><span class="p">,</span> <span class="n">plot_weight</span><span class="p">,</span> <span class="n">plot_dpWf</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
<span class="go">        plot_eff.append([])</span>
<span class="go">        plot_NPlate.append([])</span>
<span class="go">        plot_weight.append([])</span>
<span class="go">        plot_dpWf.append([])</span>
<span class="go">        cycle.update({&#39;pEvap&#39;: p_vals[i] * 10**5})</span>
<span class="go">        NPlateLowerBound = 3</span>
<span class="go">        for pptd in pptd_vals[i]:</span>
<span class="go">            cycle.update({&#39;pptdEvap&#39;: pptd, &#39;evap.L&#39;: mc.library.alfaLaval_AC30EQ().L})</span>
<span class="go">            cycle.sizeSetup(False, False)</span>
<span class="go">            cycle.evap._size(&quot;NPlate&quot;, [NPlateLowerBound, cycle.evap.sizeBounds[1]], [])</span>
<span class="go">            plot_eff[i].append(cycle.effExergy())</span>
<span class="go">            plot_NPlate[i].append(cycle.evap.NPlate)</span>
<span class="go">            plot_weight[i].append(cycle.evap.weight())</span>
<span class="go">            plot_dpWf[i].append(cycle.evap.dpWf() / (10**5))</span>
<span class="go">            NPlateLowerBound = max(3, cycle.evap.NPlate - 2)</span>
</pre></div>
</div>
<p>This produces the following plots.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/hughes2017_pptd_eff.png"><img alt="Effect of PPTD on exergy efficiency." src="../_images/hughes2017_pptd_eff.png" style="height: 200px;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/hughes2017_pptd_NPlate.png"><img alt="Effect of PPTD on required no. of plates and exchanger weight." src="../_images/hughes2017_pptd_NPlate.png" style="height: 200px;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/hughes2017_pptd_dpWf.png"><img alt="Effect of PPTD on working fluid evaporator pressure drop." src="../_images/hughes2017_pptd_dpWf.png" style="height: 200px;" /></a>
</div>
</div>
<div class="section" id="evaporating-pressure-analysis">
<h2><a class="toc-backref" href="#id14">Evaporating pressure analysis</a><a class="headerlink" href="#evaporating-pressure-analysis" title="Permalink to this headline">¶</a></h2>
<p>We now move on to studying the effects of the working fluid evaporating pressure on the pressure drops in the working fluid and exhaust gasses. Pinch-point temperature difference is kept constant at 10 K and superheating at 0 K.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cycle</span><span class="o">.</span><span class="n">superheat</span> <span class="o">=</span> <span class="mf">0.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_NPlate</span><span class="p">,</span> <span class="n">plot_dpWf</span><span class="p">,</span> <span class="n">plot_dpSf</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NPlateLowerBound</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
<span class="go">        cycle.update({&#39;pEvap&#39;: p_vals[i] * 10**5, &#39;pptdEvap&#39;: 10.})</span>
<span class="go">        cycle.sizeSetup(True, False)</span>
<span class="go">        cycle.evap.update({&#39;L&#39;: mc.library.alfaLaval_AC30EQ().L, &#39;sizeBounds[0]&#39;: NPlateLowerBound})</span>
<span class="go">        cycle.evap.size_NPlate()</span>
<span class="go">        plot_NPlate.append(cycle.evap.NPlate)</span>
<span class="go">        plot_dpWf.append(cycle.evap.dpWf() / (10**5))</span>
<span class="go">        plot_dpSf.append(cycle.evap.dpSf() / (10**5))</span>
<span class="go">        NPlateLowerBound = cycle.evap.NPlate - 1</span>
</pre></div>
</div>
<p>This produces the following plots.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/hughes2017_pressure_dpWf.png"><img alt="Effect of evaporating pressure on working fluid evaporator pressure drop." src="../_images/hughes2017_pressure_dpWf.png" style="height: 200px;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../_images/hughes2017_pressure_dpSf.png"><img alt="Effect of evaporating pressure on exhaust gas pressure drop." src="../_images/hughes2017_pressure_dpSf.png" style="height: 200px;" /></a>
</div>
</div>
<div class="section" id="exhaust-gas-mass-flow-rate-analysis">
<h2><a class="toc-backref" href="#id15">Exhaust gas mass flow rate analysis</a><a class="headerlink" href="#exhaust-gas-mass-flow-rate-analysis" title="Permalink to this headline">¶</a></h2>
<p>Finally, we study the effect of the mass flow rate of the exhaust gasses on their pressure drop in the evaporator. Here we keep the evaporator pinch-point temperature difference constant at 10 K and the evaporating pressure of the working fluid constant at 25 bar:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">superheat</span> <span class="o">=</span> <span class="mf">0.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pEvap</span> <span class="o">=</span> <span class="mi">25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pptdEvap</span> <span class="o">=</span> <span class="mf">10.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fraction_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_dpSf</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;superheat&#39;</span><span class="p">:</span> <span class="n">superheat</span><span class="p">,</span> <span class="s1">&#39;pEvap&#39;</span><span class="p">:</span> <span class="n">pEvap</span> <span class="o">*</span> <span class="mf">1e5</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mSource</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">mSf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NPlateLowerBound</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">frac</span> <span class="ow">in</span> <span class="n">fraction_vals</span><span class="p">:</span>
<span class="go">        cycle.evap.mSf = mSource * frac</span>
<span class="go">        cycle.update({&#39;pptdEvap&#39;: pptdEvap})</span>
<span class="go">        cycle.evap.update({&#39;L&#39;: mc.library.alfaLaval_AC30EQ().L, &#39;sizeBounds[0]&#39;: NPlateLowerBound})</span>
<span class="go">        cycle.sizeSetup(True, False)</span>
<span class="go">        cycle.evap.size_NPlate()</span>
<span class="go">        plot_dpSf.append(cycle.evap.dpSf() / (10**5))</span>
<span class="go">        NPlateLowerBound = cycle.evap.NPlate</span>
</pre></div>
</div>
<p>This produces the following plot.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/hughes2017_mSf_dpSf.png"><img alt="Effect of exhaust gas mass flow rate on their pressure drop." src="../_images/hughes2017_mSf_dpSf.png" style="height: 200px;" /></a>
</div>
</div>
<div class="section" id="differences-from-hughes-and-olsen-2017-paper">
<h2><a class="toc-backref" href="#id16">Differences from Hughes and Olsen (2017) paper</a><a class="headerlink" href="#differences-from-hughes-and-olsen-2017-paper" title="Permalink to this headline">¶</a></h2>
<p>Slight differences between the results presented above and the results in <a class="reference internal" href="#hughes2017" id="id2">[Hughes2017]</a> arise for the following reasons.</p>
<ul class="simple">
<li>This analysis approximates the exhaust gas properties using a quadratic line of best fit based on the properties evaluated at 300, 500, 700, 900 &amp; 1170 K, whereas the original paper used a linear line of best fit based of the properties evaluated at 900 &amp; 1170 K.</li>
<li>This analysis takes into account the port, acceleration and static head pressure drops whereas the original paper neglected these.</li>
<li>The <cite>size_NPlate</cite> algorithm of HxPlateCorrugated in this analysis sizes for <cite>NPlate</cite> that gives <cite>L</cite> closest to the desired heat transfer length, whereas the algorithm in the original paper sized for <cite>L</cite> closest to but less than the desired heat transfer length.</li>
</ul>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#id17">References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<table class="docutils citation" frame="void" id="hughes2017" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Hughes2017]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> Hughes, M., Olsen, J., <em>On the potential of organic Rankine cycles for recovering waste heat from the exhaust gases of a piston aero-engine</em>, Asia-Pacific International Symposium on Aerospace Technology, Seoul, Korea, 2017.</td></tr>
</tbody>
</table>
<p>This paper can be found at <a class="reference external" href="https://www.unsworks.unsw.edu.au/primo-explore/fulldisplay?docid=unsworks_modsunsworks_47631&amp;context=L&amp;vid=UNSWORKS&amp;search_scope=unsworks_search_scope&amp;tab=default_tab&amp;lang=en_US">this link</a> and can be cited using the following reference.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>@InProceedings{hughes2017potential,
    author    = {Hughes, Momar Graham-Orr and Olsen, John},
    title     = {On the potential of organic Rankine cycles for recovering waste heat from the exhaust gases of a piston aero-engine},
    booktitle = {Proceedings of the 2017 Asia-Pacific International Symposium on Aerospace Technology; October 16-18; Seoul; Korea},
    year      = {2017},
    pages     = {1876--1883},
    keywords  = {Aircraft engine, Organic Rankine cycle, Waste heat recovery, Plate heat exchanger},
    url = {\\url{https://www.unsworks.unsw.edu.au/primo-explore/fulldisplay?docid=unsworks_modsunsworks_47631&amp;context=L&amp;vid=UNSWORKS&amp;search_scope=unsworks_search_scope&amp;tab=default_tab&amp;lang=en_US}}
}
</pre></div>
</div>
</div>
<div class="section" id="source-code">
<h2><a class="toc-backref" href="#id18">Source code</a><a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;hughes2017.py : Basic organic Rankine cycle with a corrugated-plate evaporator. This example is found in examples/hughes2017 and is an update to the analysis found in the paper *On the potential of organic Rankine cycles for recovering waste heat from the exhaust gases of a piston aero-engine* by Hughes and Olsen, presented at Asia-Pacific Symposium on Aerospace Technology 2017, Seoul, Korea (`hyperlink &lt;https://www.unsworks.unsw.edu.au/primo-explore/fulldisplay?docid=unsworks_modsunsworks_47631&amp;context=L&amp;vid=UNSWORKS&amp;search_scope=unsworks_search_scope&amp;tab=default_tab&amp;lang=en_US&gt;`_) [Hughes2017]_.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">mcycle</span> <span class="k">as</span> <span class="nn">mc</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="k">import</span> <span class="n">nan</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">CoolProp</span> <span class="k">as</span> <span class="nn">CP</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">timeit</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Begin hughes2017 example...&quot;</span><span class="p">)</span>
<span class="c1"># ************************************************</span>
<span class="c1"># Set up formatting</span>
<span class="c1"># ************************************************</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Set MCycle defaults and formatting...&quot;</span><span class="p">)</span>
<span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span> <span class="o">=</span> <span class="s1">&#39;plots&#39;</span>
<span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span> <span class="o">=</span> <span class="s2">&quot;png&quot;</span>  <span class="c1"># change to &quot;jpg&quot; if preferred</span>
<span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">mc</span><span class="o">.</span><span class="n">updateDefaults</span><span class="p">()</span>
<span class="c1"># custom formatting for matplotlib</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;lines&quot;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">colours</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">]</span>
<span class="n">linestyles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="s2">&quot;-.&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">]</span>
<span class="n">markerstyles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;^&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;defaults and formatting done.&quot;</span><span class="p">)</span>

<span class="c1"># ************************************************</span>
<span class="c1"># Set up default cycle</span>
<span class="c1"># ************************************************</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Begin Rankine cycle setup...&quot;</span><span class="p">)</span>
<span class="n">wf</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">FlowState</span><span class="p">(</span><span class="s2">&quot;R123&quot;</span><span class="p">)</span>
<span class="n">pEvap</span> <span class="o">=</span> <span class="mf">10.e5</span>
<span class="n">superheat</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">TCond</span> <span class="o">=</span> <span class="mf">300.</span>
<span class="n">subcool</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">comp</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">CompBasic</span><span class="p">(</span><span class="n">nan</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">sizeAttr</span><span class="o">=</span><span class="s2">&quot;pRatio&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - created compressor&quot;</span><span class="p">)</span>
<span class="n">sourceIn_m</span> <span class="o">=</span> <span class="mf">0.09</span>
<span class="n">sourceIn_T</span> <span class="o">=</span> <span class="mf">1170.</span>
<span class="n">sourceIn_p</span> <span class="o">=</span> <span class="mf">1.116e5</span>
<span class="n">sourceFluid</span> <span class="o">=</span> <span class="s2">&quot;N2[</span><span class="si">{0}</span><span class="s2">]&amp;CO2[</span><span class="si">{1}</span><span class="s2">]&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="n">TData</span> <span class="o">=</span> <span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">900</span><span class="p">,</span> <span class="n">sourceIn_T</span><span class="p">]</span>
<span class="n">sourceRefData</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">RefData</span><span class="p">(</span>
    <span class="n">sourceFluid</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sourceIn_p</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="n">TData</span><span class="p">},</span> <span class="n">phaseCP</span><span class="o">=</span><span class="n">CP</span><span class="o">.</span><span class="n">iphase_gas</span><span class="p">)</span>
<span class="n">sourceIn</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">FlowStatePoly</span><span class="p">(</span><span class="n">sourceRefData</span><span class="p">,</span> <span class="mf">0.09</span><span class="p">,</span> <span class="n">CP</span><span class="o">.</span><span class="n">PT_INPUTS</span><span class="p">,</span> <span class="n">sourceIn_p</span><span class="p">,</span>
                            <span class="n">sourceIn_T</span><span class="p">)</span>
<span class="n">sourceAmbient</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">FlowState</span><span class="p">(</span><span class="n">sourceFluid</span><span class="p">,</span> <span class="n">CP</span><span class="o">.</span><span class="n">iphase_gas</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">CP</span><span class="o">.</span><span class="n">PT_INPUTS</span><span class="p">,</span>
                             <span class="mf">0.88260e5</span><span class="p">,</span> <span class="mf">281.65</span><span class="p">)</span>

<span class="n">evap</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_AC30EQ</span><span class="p">(</span><span class="n">sizeAttr</span><span class="o">=</span><span class="s2">&quot;NPlate&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - created evaporator&quot;</span><span class="p">)</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">ExpBasic</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">sizeAttr</span><span class="o">=</span><span class="s2">&quot;pRatio&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - created expander&quot;</span><span class="p">)</span>
<span class="n">sinkIn</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">FlowState</span><span class="p">(</span><span class="s2">&quot;Air&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">CP</span><span class="o">.</span><span class="n">PT_INPUTS</span><span class="p">,</span> <span class="mf">0.88260e5</span><span class="p">,</span> <span class="mf">281.65</span><span class="p">)</span>
<span class="n">sinkAmbient</span> <span class="o">=</span> <span class="n">sinkIn</span><span class="o">.</span><span class="n">_copy</span><span class="p">({})</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">ClrBasicConstP</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sizeAttr</span><span class="o">=</span><span class="s2">&quot;Q&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - created condenser&quot;</span><span class="p">)</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">Config</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;dpEvap&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;dpCond&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;dpF&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;dpAcc&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;dpPort&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;dpHead&#39;</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">})</span>
<span class="n">config</span><span class="o">.</span><span class="n">set_method</span><span class="p">(</span><span class="s2">&quot;chisholmWannairachchi_sp&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;GeomHxPlateCorrChevron&quot;</span><span class="p">],</span>
                  <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;all-sp&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;wf&quot;</span><span class="p">])</span>
<span class="n">config</span><span class="o">.</span><span class="n">set_method</span><span class="p">(</span><span class="s2">&quot;yanLin_tpEvap&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;GeomHxPlateCorrChevron&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">],</span>
                  <span class="p">[</span><span class="s2">&quot;tpEvap&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;wf&quot;</span><span class="p">])</span>
<span class="n">config</span><span class="o">.</span><span class="n">set_method</span><span class="p">(</span><span class="s2">&quot;savostinTikhonov_sp&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;GeomHxPlateCorrChevron&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;all&quot;</span><span class="p">],</span>
                  <span class="p">[</span><span class="s2">&quot;all-sp&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;sf&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - created configuration object&quot;</span><span class="p">)</span>
<span class="n">cycle</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">RankineBasic</span><span class="p">(</span><span class="n">wf</span><span class="p">,</span> <span class="n">evap</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">cond</span><span class="p">,</span> <span class="n">comp</span><span class="p">,</span> <span class="n">pEvap</span><span class="p">,</span> <span class="n">superheat</span><span class="p">,</span> <span class="n">nan</span><span class="p">,</span>
                        <span class="n">subcool</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
<span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
    <span class="s1">&#39;TCond&#39;</span><span class="p">:</span> <span class="n">TCond</span><span class="p">,</span>
    <span class="s1">&#39;sourceIn&#39;</span><span class="p">:</span> <span class="n">sourceIn</span><span class="p">,</span>
    <span class="s1">&#39;sourceAmbient&#39;</span><span class="p">:</span> <span class="n">sourceAmbient</span><span class="p">,</span>
    <span class="c1">#&#39;sinkIn&#39;: sinkIn,</span>
    <span class="c1">#&#39;sinkDead&#39;: sinkDead</span>
<span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - created cycle&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;setup done.&quot;</span><span class="p">)</span>


<span class="nd">@mc</span><span class="o">.</span><span class="n">timeThis</span>
<span class="k">def</span> <span class="nf">run_plot</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Example of RankineBasic.plot().&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Begin plotting design cycle ...&quot;</span><span class="p">)</span>
    <span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
        <span class="s1">&#39;cond&#39;</span><span class="p">:</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_CBXP27</span><span class="p">(),</span>
        <span class="s1">&#39;pptdEvap&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
        <span class="s1">&#39;sinkIn&#39;</span><span class="p">:</span> <span class="n">sinkIn</span><span class="p">,</span>
        <span class="s1">&#39;sinkIn.m&#39;</span><span class="p">:</span> <span class="mf">100.</span>
    <span class="p">})</span>
    <span class="c1">#cycle.sinkIn.m = 100.</span>
    <span class="n">cycle</span><span class="o">.</span><span class="n">sizeSetup</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Create plots in ./</span><span class="si">{}</span><span class="s2"> folder...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">))</span>
    <span class="n">cycle</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">graph</span><span class="o">=</span><span class="s1">&#39;Ts&#39;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Design conditions plot&#39;</span><span class="p">,</span>
        <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span>
        <span class="n">satCurve</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">newFig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">savefig</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">savefig_name</span><span class="o">=</span><span class="s1">&#39;hughes2017_plot_RankineBasic&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - plot saved in </span><span class="si">{}</span><span class="s2">/plot_RankineBasic.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">,</span> <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span><span class="p">))</span>
    <span class="n">cycle</span><span class="o">.</span><span class="n">sinkIn</span><span class="o">.</span><span class="n">m</span> <span class="o">=</span> <span class="n">nan</span>
    <span class="n">cycle</span><span class="o">.</span><span class="n">cond</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">ClrBasicConstP</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">sizeAttr</span><span class="o">=</span><span class="s2">&quot;pRatio&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;End plotting design cycle&quot;</span><span class="p">)</span>


<span class="nd">@mc</span><span class="o">.</span><span class="n">timeThis</span>
<span class="k">def</span> <span class="nf">run_superheat</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Superheating analysis.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Begin superheating analysis...&quot;</span><span class="p">)</span>
    <span class="n">pptdEvap</span> <span class="o">=</span> <span class="mf">20.</span>  <span class="c1"># K</span>
    <span class="n">p_vals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>  <span class="c1"># bar</span>
    <span class="n">superheat_vals</span> <span class="o">=</span> <span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">)]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)</span>  <span class="c1"># K</span>
    <span class="n">plot_eff</span><span class="p">,</span> <span class="n">plot_Pnet</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>  <span class="c1"># lists to store results</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
        <span class="n">plot_eff</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
        <span class="n">plot_Pnet</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;pEvap&#39;</span><span class="p">:</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">})</span>
        <span class="k">for</span> <span class="n">superheat</span> <span class="ow">in</span> <span class="n">superheat_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;superheat&#39;</span><span class="p">:</span> <span class="n">superheat</span><span class="p">,</span> <span class="s1">&#39;pptdEvap&#39;</span><span class="p">:</span> <span class="n">pptdEvap</span><span class="p">})</span>
            <span class="n">cycle</span><span class="o">.</span><span class="n">sizeSetup</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="n">plot_eff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">effExergy</span><span class="p">())</span>
            <span class="n">plot_Pnet</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">PNet</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>  <span class="c1"># kW</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Create plots in ./</span><span class="si">{}</span><span class="s2"> folder...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">superheat_vals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">plot_eff</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$p_</span><span class="si">{}</span><span class="s2">$=</span><span class="si">{}</span><span class="s2">bar&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{evap}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
            <span class="n">color</span><span class="o">=</span><span class="n">colours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;exergy efficiency [-]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower right&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;degree of superheating [K]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
        <span class="s2">&quot;./</span><span class="si">{}</span><span class="s2">/hughes2017_superheat_eff.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">,</span>
                                                  <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span><span class="p">),</span>
        <span class="n">dpi</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span><span class="p">,</span>
        <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - exergy efficiency v superheating&quot;</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>  <span class="c1"># power v superheating</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">superheat_vals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">plot_Pnet</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$p_</span><span class="si">{}</span><span class="s2">$=</span><span class="si">{}</span><span class="s2">bar&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{evap}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
            <span class="n">color</span><span class="o">=</span><span class="n">colours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;net Power output [kW]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower right&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;degree of superheating [K]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
        <span class="s2">&quot;./</span><span class="si">{}</span><span class="s2">/hughes2017_superheat_Pnet.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">,</span>
                                                   <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span><span class="p">),</span>
        <span class="n">dpi</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span><span class="p">,</span>
        <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - net power v superheating&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Superheating analysis done.&quot;</span><span class="p">)</span>


<span class="nd">@mc</span><span class="o">.</span><span class="n">timeThis</span>
<span class="k">def</span> <span class="nf">run_pptd</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Pinch-point temperature difference analysis.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Begin pinch-point temperature difference analysis...&quot;</span><span class="p">)</span>
    <span class="n">cycle</span><span class="o">.</span><span class="n">superheat</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># K</span>
    <span class="n">p_vals</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>  <span class="c1"># bar</span>
    <span class="n">pptd_vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span> <span class="mi">40</span><span class="p">)]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)</span>  <span class="c1"># K</span>
    <span class="n">plot_eff</span><span class="p">,</span> <span class="n">plot_NPlate</span><span class="p">,</span> <span class="n">plot_weight</span><span class="p">,</span> <span class="n">plot_dpWf</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="c1">#</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
        <span class="n">plot_eff</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
        <span class="n">plot_NPlate</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
        <span class="n">plot_weight</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
        <span class="n">plot_dpWf</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;pEvap&#39;</span><span class="p">:</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">})</span>
        <span class="n">NPlateLowerBound</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="k">for</span> <span class="n">pptd</span> <span class="ow">in</span> <span class="n">pptd_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="s1">&#39;pptdEvap&#39;</span><span class="p">:</span> <span class="n">pptd</span><span class="p">,</span>
                <span class="s1">&#39;evap.L&#39;</span><span class="p">:</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_AC30EQ</span><span class="p">()</span><span class="o">.</span><span class="n">L</span>
            <span class="p">})</span>
            <span class="n">cycle</span><span class="o">.</span><span class="n">sizeSetup</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">_size</span><span class="p">(</span><span class="s2">&quot;NPlate&quot;</span><span class="p">,</span>
                             <span class="p">[</span><span class="n">NPlateLowerBound</span><span class="p">,</span> <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">sizeBounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[])</span>
            <span class="n">plot_eff</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">effExergy</span><span class="p">())</span>
            <span class="n">plot_NPlate</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">NPlate</span><span class="p">)</span>
            <span class="n">plot_weight</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">weight</span><span class="p">())</span>
            <span class="n">plot_dpWf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">dpWf</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">))</span>
            <span class="n">NPlateLowerBound</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">NPlate</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Create plots in ./</span><span class="si">{}</span><span class="s2"> folder...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">pptd_vals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">plot_eff</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$p_</span><span class="si">{}</span><span class="s2">$=</span><span class="si">{}</span><span class="s2">bar&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{evap}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
            <span class="n">color</span><span class="o">=</span><span class="n">colours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;exergy efficieny [-]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;PPTD [K]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
        <span class="s2">&quot;./</span><span class="si">{}</span><span class="s2">/hughes2017_pptd_eff.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">,</span>
                                             <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span><span class="p">),</span>
        <span class="n">dpi</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span><span class="p">,</span>
        <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
    <span class="c1"># plt.show()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - exergy efficiency v pptd&quot;</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
            <span class="n">pptd_vals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">plot_dpWf</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$p_</span><span class="si">{}</span><span class="s2">$=</span><span class="si">{}</span><span class="s2">bar&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{evap}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
            <span class="n">color</span><span class="o">=</span><span class="n">colours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">marker</span><span class="o">=</span><span class="n">markerstyles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Working fluid pressure drop [-]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;PPTD [K]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
        <span class="s2">&quot;./</span><span class="si">{}</span><span class="s2">/hughes2017_pptd_dpWf.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">,</span>
                                              <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span><span class="p">),</span>
        <span class="n">dpi</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span><span class="p">,</span>
        <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
    <span class="c1"># plt.show()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - wf pressure drop v pptd&quot;</span><span class="p">)</span>
    <span class="c1">#</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
            <span class="n">pptd_vals</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">plot_NPlate</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$p_</span><span class="si">{}</span><span class="s2">$=</span><span class="si">{}</span><span class="s2">bar&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{evap}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
            <span class="n">color</span><span class="o">=</span><span class="n">colours</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">marker</span><span class="o">=</span><span class="n">markerstyles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;PPTD [K]&#39;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Number of plates [-]&#39;</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">)</span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="n">mn</span><span class="p">,</span> <span class="n">mx</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
    <span class="n">vol</span> <span class="o">=</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_AC30EQ</span><span class="p">()</span><span class="o">.</span><span class="n">LPlate</span><span class="p">()</span> <span class="o">*</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_AC30EQ</span><span class="p">(</span>
    <span class="p">)</span><span class="o">.</span><span class="n">WPlate</span><span class="p">()</span> <span class="o">*</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_AC30EQ</span><span class="p">()</span><span class="o">.</span><span class="n">tPlate</span>
    <span class="n">c0</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">coeffs_weight</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">vol</span>
    <span class="n">c1</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">coeffs_weight</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">vol</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">mn</span> <span class="o">*</span> <span class="n">c1</span> <span class="o">+</span> <span class="n">c0</span><span class="p">,</span> <span class="n">mx</span> <span class="o">*</span> <span class="n">c1</span> <span class="o">+</span> <span class="n">c0</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;empty weight [Kg]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
        <span class="s2">&quot;./</span><span class="si">{}</span><span class="s2">/hughes2017_pptd_NPlate.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">,</span>
                                                <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span><span class="p">),</span>
        <span class="n">dpi</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span><span class="p">,</span>
        <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
    <span class="c1"># plt.show()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - N and weight v pptd&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pinch-point temperature difference analysis done.&quot;</span><span class="p">)</span>


<span class="nd">@mc</span><span class="o">.</span><span class="n">timeThis</span>
<span class="k">def</span> <span class="nf">run_pressure</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Evaporating pressure analysis&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Begin evaporating pressure analysis...&quot;</span><span class="p">)</span>
    <span class="n">cycle</span><span class="o">.</span><span class="n">superheat</span> <span class="o">=</span> <span class="mf">0.</span>
    <span class="n">p_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">plot_NPlate</span><span class="p">,</span> <span class="n">plot_dpWf</span><span class="p">,</span> <span class="n">plot_dpSf</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="n">NPlateLowerBound</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)):</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;pEvap&#39;</span><span class="p">:</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;pptdEvap&#39;</span><span class="p">:</span> <span class="mf">10.</span><span class="p">})</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">sizeSetup</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s1">&#39;L&#39;</span><span class="p">:</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_AC30EQ</span><span class="p">()</span><span class="o">.</span><span class="n">L</span><span class="p">,</span>
            <span class="s1">&#39;sizeBounds[0]&#39;</span><span class="p">:</span>
            <span class="n">NPlateLowerBound</span>  <span class="c1"># use previous solution for better bounds</span>
        <span class="p">})</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">size_NPlate</span><span class="p">()</span>
        <span class="n">plot_NPlate</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">NPlate</span><span class="p">)</span>
        <span class="n">plot_dpWf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">dpWf</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">))</span>
        <span class="n">plot_dpSf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">dpSf</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">))</span>
        <span class="n">NPlateLowerBound</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">NPlate</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Create plots in ./</span><span class="si">{}</span><span class="s2"> folder...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
        <span class="n">p_vals</span><span class="p">,</span>
        <span class="n">plot_dpWf</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$p_</span><span class="si">{}</span><span class="s2">$=</span><span class="si">{}</span><span class="s2">bar&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{evap}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
        <span class="n">color</span><span class="o">=</span><span class="n">colours</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">marker</span><span class="o">=</span><span class="n">markerstyles</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;working fluid pressure drop [bar]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;evaporation pressure [bar]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
        <span class="s2">&quot;./</span><span class="si">{}</span><span class="s2">/hughes2017_pressure_dpWf.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">,</span>
                                                  <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span><span class="p">),</span>
        <span class="n">dpi</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span><span class="p">,</span>
        <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
    <span class="c1"># plt.show()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - wf pressure drop v evap pressure&quot;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
        <span class="n">p_vals</span><span class="p">,</span>
        <span class="n">plot_dpSf</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$p_</span><span class="si">{}</span><span class="s2">$=</span><span class="si">{}</span><span class="s2">bar&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{evap}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">p_vals</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
        <span class="n">color</span><span class="o">=</span><span class="n">colours</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">marker</span><span class="o">=</span><span class="n">markerstyles</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;exhaust gas pressure drop [bar]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;evaporation pressure [bar]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
        <span class="s2">&quot;./</span><span class="si">{}</span><span class="s2">/hughes2017_pressure_dpSf.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">,</span>
                                                  <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span><span class="p">),</span>
        <span class="n">dpi</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span><span class="p">,</span>
        <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
    <span class="c1"># plt.show()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - sf pressure drop v evap pressure&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pressure analysis done.&quot;</span><span class="p">)</span>


<span class="nd">@mc</span><span class="o">.</span><span class="n">timeThis</span>
<span class="k">def</span> <span class="nf">run_mass</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Mass flow rate analysis.&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Begin mass flow rate analysis...&quot;</span><span class="p">)</span>
    <span class="n">superheat</span> <span class="o">=</span> <span class="mf">0.</span>
    <span class="n">pEvap</span> <span class="o">=</span> <span class="mi">25</span>
    <span class="n">pptdEvap</span> <span class="o">=</span> <span class="mf">10.</span>
    <span class="n">fraction_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
    <span class="n">plot_dpSf</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;superheat&#39;</span><span class="p">:</span> <span class="n">superheat</span><span class="p">,</span> <span class="s1">&#39;pEvap&#39;</span><span class="p">:</span> <span class="n">pEvap</span> <span class="o">*</span> <span class="mf">1e5</span><span class="p">})</span>
    <span class="n">mSource</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">mSf</span>
    <span class="n">NPlateLowerBound</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">for</span> <span class="n">frac</span> <span class="ow">in</span> <span class="n">fraction_vals</span><span class="p">:</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">mSf</span> <span class="o">=</span> <span class="n">mSource</span> <span class="o">*</span> <span class="n">frac</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;pptdEvap&#39;</span><span class="p">:</span> <span class="n">pptdEvap</span><span class="p">})</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s1">&#39;L&#39;</span><span class="p">:</span> <span class="n">mc</span><span class="o">.</span><span class="n">library</span><span class="o">.</span><span class="n">alfaLaval_AC30EQ</span><span class="p">()</span><span class="o">.</span><span class="n">L</span><span class="p">,</span>
            <span class="s1">&#39;sizeBounds[0]&#39;</span><span class="p">:</span> <span class="n">NPlateLowerBound</span>
        <span class="p">})</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">sizeSetup</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
        <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">size_NPlate</span><span class="p">()</span>
        <span class="n">plot_dpSf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">dpSf</span><span class="p">()</span> <span class="o">/</span> <span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">))</span>
        <span class="n">NPlateLowerBound</span> <span class="o">=</span> <span class="n">cycle</span><span class="o">.</span><span class="n">evap</span><span class="o">.</span><span class="n">NPlate</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Create plots in ./</span><span class="si">{}</span><span class="s2"> folder...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
        <span class="n">fraction_vals</span><span class="p">,</span>
        <span class="n">plot_dpSf</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$p_</span><span class="si">{}</span><span class="s2">$=</span><span class="si">{}</span><span class="s2">bar&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{evap}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pEvap</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;exhaust gas pressure drop [bar]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;proportion of total exhaust gases [-]&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span>
        <span class="s2">&quot;./</span><span class="si">{}</span><span class="s2">/hughes2017_mSf_dpSf.</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DIR</span><span class="p">,</span>
                                             <span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_FORMAT</span><span class="p">),</span>
        <span class="n">dpi</span><span class="o">=</span><span class="n">mc</span><span class="o">.</span><span class="n">DEFAULTS</span><span class="o">.</span><span class="n">PLOT_DPI</span><span class="p">,</span>
        <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
    <span class="c1"># plt.show()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  - sf pressure drop v fraction of sf mass&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mass flow rate analysis done.&quot;</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">run_plot</span><span class="p">()</span>
    <span class="n">run_superheat</span><span class="p">()</span>
    <span class="n">run_pptd</span><span class="p">()</span>
    <span class="n">run_pressure</span><span class="p">()</span>
    <span class="n">run_mass</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Basic organic Rankine cycle with a corrugated-plate evaporator</a><ul>
<li><a class="reference internal" href="#setting-up-the-default-characteristics-of-the-cycle">Setting up the default characteristics of the cycle</a><ul>
<li><a class="reference internal" href="#working-fluid">Working fluid</a></li>
<li><a class="reference internal" href="#heat-source">Heat source</a></li>
<li><a class="reference internal" href="#ambient-air-heat-sink">Ambient air/ heat sink</a></li>
<li><a class="reference internal" href="#evaporator-and-condenser">Evaporator and condenser</a></li>
<li><a class="reference internal" href="#compressor-and-expander">Compressor and expander</a></li>
<li><a class="reference internal" href="#design-parameters">Design parameters</a></li>
<li><a class="reference internal" href="#design-conditions-temperature-entropy-plot">Design conditions temperature-entropy plot</a></li>
</ul>
</li>
<li><a class="reference internal" href="#superheating-analysis">Superheating analysis</a></li>
<li><a class="reference internal" href="#pinch-point-temperature-difference-analysis">Pinch-point temperature difference analysis</a></li>
<li><a class="reference internal" href="#evaporating-pressure-analysis">Evaporating pressure analysis</a></li>
<li><a class="reference internal" href="#exhaust-gas-mass-flow-rate-analysis">Exhaust gas mass flow rate analysis</a></li>
<li><a class="reference internal" href="#differences-from-hughes-and-olsen-2017-paper">Differences from Hughes and Olsen (2017) paper</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#source-code">Source code</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="quickstart.html"
                        title="previous chapter">Quick start example of basic MCycle features</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../defaults.html"
                        title="next chapter">MCycle Defaults</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/examples/hughes2017.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../defaults.html" title="MCycle Defaults"
             >next</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quick start example of basic MCycle features"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MCycle 1.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="contents.html" >Examples</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Momar Hughes.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
    </div>
  </body>
</html>